<% @page_title = 'Subjects' %>
<%= link_to('<< Back to Menu',
            {controller: 'access', action: 'index'},
            class: 'back-link') %>
<div class="subjects index">
  <h2>List of Subjects</h2>
  <% i_tag = image_tag('plus_sign.png', size: '11x11', alt: '+') %>
  <%= link_to(i_tag + ' Add New Subject',
              {action: 'new'},
              class: 'action new') %>
  <div><%= pluralize(@subjects.size, 'subject') %> found </div>
  <table class="listing" summary="Subject list">
    <tr class='header'>
      <th> </th>
      <th>Subject</th>
      <th>Visible</th>
      <th>Pages</th>
      <th>Actions</th>
    </tr>
    <% @subjects.each do |subject| %>
    <tr class="<%= cycle('odd', 'even') %>">
      <td><%= subject.position %></td>
      <td><%= subject.name %></td>
      <td><%= status_tag(subject.visible) %></td>
      <td><%= subject.pages.size %></td>
      <td>
        <%= link_to('View Pages',
                    {controller: 'pages', subject_id: subject.id},
                    class: 'action show') %>
        <%= link_to('Show',
                    {action: 'show', id: subject.id},
                    class: 'action show') %>
        <%= link_to('Edit',
                    {action: 'edit', id: subject.id},
                    class: 'action show') %>
        <%= link_to('Delete',
                    {action: 'delete', id: subject.id},
                    class: 'action show') %>
      </td>
    </tr>
    <% end %>
  </table>
</div>
